<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Bitcount+Grid+Single:wght@100..900&family=Lexend+Giga:wght@100..900&display=swap"
    rel="stylesheet">
  <title>Cuboid Unfolding Animation</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: #ffffff;
      font-family: Arial, sans-serif;
    }

    canvas {
      display: block;
    }

    button {
      background: white;
      border: 2px solid #222;
      color: black;
      padding: 10px 20px;
      cursor: pointer;
      border-radius: 5px;
      font-size: 16px;
      margin-right: 10px;
      margin-bottom: 10px;
    }

    .info-label {
      position: absolute;
      background: rgba(0, 0, 0, 0.85);
      color: white;
      padding: 8px 12px;
      border-radius: 6px;
      font-family: Arial, sans-serif;
      font-size: 14px;
      pointer-events: none;
      z-index: 1000;
      white-space: nowrap;
      border: 2px solid white;
      box-shadow: 0 4px 8px rgba(0, 0, 0, 0.3);
    }

    .info-label::before {
      content: '';
      position: absolute;
      width: 10px;
      height: 10px;
      background: white;
      border-radius: 50%;
      left: -15px;
      top: 50%;
      transform: translateY(-50%);
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
    }

    .info-label::after {
      content: '';
      position: absolute;
      width: 2px;
      height: 2px;
      background: white;
      left: -10px;
      top: 50%;
      transform: translateY(-50%);
      box-shadow: 0 0 0 20px rgba(255, 255, 255, 0.1);
      border-radius: 50%;
    }
  </style>
</head>

<body>
  <div style="
    position: absolute;
    top: 20px; 
    left: 50%;
    transform: translateX(-50%);
    display: flex;
    align-items: center;
    gap: 20px;
">
    <div id="geometryTitle" style="
      padding: 10px 20px;
      border-radius: 5px;
      font-family: 'Lexend Giga', sans-serif;
      font-size: 90px;
      font-weight: bold;
  ">
      Balok
    </div>
  </div>

  <div id="formulaPanel" style="
    position: absolute;
    top: 50%;
    right: 20px;
    transform: translateY(-50%);
    width: 400px;
    background: linear-gradient(135deg, rgba(255, 255, 255, 0.98) 0%, rgba(245, 245, 245, 0.98) 100%);
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 8px 16px rgba(0,0,0,0.15);
    font-family: 'Cambria Math', 'STIX Math', 'Times New Roman', serif;
    font-size: 25px;
    color: #222;
    border: 1px solid rgba(0, 0, 0, 0.1);
">
    <h3 style="
        margin-top: 0;
        font-size: 28px;
        border-bottom: 3px solid #000;
        padding-bottom: 10px;
        letter-spacing: 0.5px;
    ">Rumus Balok</h3>

    <div style="
        background: rgba(0, 0, 0, 0.03);
        padding: 15px;
        border-radius: 8px;
        margin: 15px 0;
        border-left: 4px solid #000;
    ">
      <p style="margin: 8px 0;"><strong>Volume:</strong> <span style="font-size: 28px; color: #000;">V = p × l × t</span></p>
      <p style="margin: 8px 0;"><strong>Luas Permukaan:</strong> <span style="font-size: 24px; color: #000;">A = 2(pl + pt + lt)</span></p>
    </div>

    <hr style="border: none; border-top: 2px dashed #ccc; margin: 20px 0;">

    <h4 style="
        font-size: 24px;
        margin: 15px 0 10px 0;
        color: #444;
    ">Contoh</h4>

    <div style="
        background: rgba(0, 0, 0, 0.05);
        padding: 15px;
        border-radius: 8px;
        border: 2px solid #000;
    ">
      <p id="dimensions" style="
            margin: 8px 0;
            font-weight: 600;
            color: #555;
            font-size: 18px;
        ">p = 15 cm, l = 10 cm, t = 8 cm</p>
      <p id="volume" style="
            margin: 8px 0;
            font-size: 20px;
            color: #000;
        ">V = 15 × 10 × 8 = 1200 cm³</p>
      <p id="surface" style="
            margin: 8px 0;
            font-size: 18px;
            color: #000;
        ">A = 2(150 + 120 + 80) = 700 cm²</p>
    </div>
  </div>

  <div id="controlPanel" style="
    position: absolute;
    top: 50%;
    left: 20px;
    transform: translateY(-50%);
    width: 250px;
    background: rgba(255, 255, 255, 0.95);
    padding: 15px;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.3);
    font-family: Arial, sans-serif;
    font-size: 22px;
    color: #222;
    text-align: center;
">
    <h3 style="margin-top:0;">Kontrol</h3>
    <button id="toggleBtn" style="
        margin: 8px 0; 
        width: 100%; 
        padding: 12px; 
        font-size: 20px;
        background: #000;
        color: white;
        border: 2px solid #000;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
    " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 12px rgba(0, 0, 0, 0.3)'"
      onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 6px rgba(0, 0, 0, 0.2)'">
      Bongkar
    </button>
    <button id="showInfoBtn" style="
        margin: 8px 0; 
        width: 100%; 
        padding: 12px; 
        font-size: 20px;
        background: #000;
        color: white;
        border: 2px solid #000;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.2);
    " onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 12px rgba(0, 0, 0, 0.3)'"
      onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 6px rgba(0, 0, 0, 0.2)'">
      Tampilkan Info
    </button>
    <button id="resetBtn" style="
        margin: 8px 0; 
        width: 100%; 
        padding: 12px; 
        font-size: 20px;
        background: white;
        color: #000;
        border: 2px solid #000;
        border-radius: 8px;
        cursor: pointer;
        font-weight: 600;
        transition: all 0.3s ease;
        box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
    " onmouseover="this.style.background='#000'; this.style.color='white'; this.style.transform='translateY(-2px)'; this.style.boxShadow='0 6px 12px rgba(0, 0, 0, 0.3)'"
      onmouseout="this.style.background='white'; this.style.color='#000'; this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 6px rgba(0, 0, 0, 0.1)'">
      Reset Tampilan
    </button>

    <hr style="margin: 15px 0;">
    <h4 style="margin: 10px 0;">Zoom</h4>
    <div style="display: flex; gap: 8px;">
      <button id="zoomInBtn" style="
          margin: 0; 
          width: 50%; 
          padding: 12px; 
          font-size: 24px;
          background: #000;
          color: white;
          border: 2px solid #000;
          border-radius: 8px;
          cursor: pointer;
          font-weight: 700;
          transition: all 0.3s ease;
          box-shadow: 0 3px 5px rgba(0, 0, 0, 0.2);
      " onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 5px 10px rgba(0, 0, 0, 0.3)'"
        onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 3px 5px rgba(0, 0, 0, 0.2)'">
        +
      </button>
      <button id="zoomOutBtn" style="
          margin: 0; 
          width: 50%; 
          padding: 12px; 
          font-size: 24px;
          background: white;
          color: #000;
          border: 2px solid #000;
          border-radius: 8px;
          cursor: pointer;
          font-weight: 700;
          transition: all 0.3s ease;
          box-shadow: 0 3px 5px rgba(0, 0, 0, 0.1);
      " onmouseover="this.style.background='#000'; this.style.color='white'; this.style.transform='scale(1.05)'; this.style.boxShadow='0 5px 10px rgba(0, 0, 0, 0.3)'"
        onmouseout="this.style.background='white'; this.style.color='#000'; this.style.transform='scale(1)'; this.style.boxShadow='0 3px 5px rgba(0, 0, 0, 0.1)'">
        −
      </button>
    </div>

    <hr style="margin: 15px 0;">
    <h4 style="margin: 10px 0;">Ukuran</h4>
    
    <div style="margin: 10px 0;">
      <label style="font-size: 16px; display: block; margin-bottom: 5px;">Panjang (p)</label>
      <div style="display: flex; gap: 8px;">
        <button id="addLengthBtn" style="
            margin: 0; 
            width: 50%; 
            padding: 12px; 
            font-size: 24px;
            background: #000;
            color: white;
            border: 2px solid #000;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s ease;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.2);
        " onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 5px 10px rgba(0, 0, 0, 0.3)'"
          onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 3px 5px rgba(0, 0, 0, 0.2)'">
          +
        </button>
        <button id="redLengthBtn" style="
            margin: 0; 
            width: 50%; 
            padding: 12px; 
            font-size: 24px;
            background: white;
            color: #000;
            border: 2px solid #000;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s ease;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.1);
        " onmouseover="this.style.background='#000'; this.style.color='white'; this.style.transform='scale(1.05)'; this.style.boxShadow='0 5px 10px rgba(0, 0, 0, 0.3)'"
          onmouseout="this.style.background='white'; this.style.color='#000'; this.style.transform='scale(1)'; this.style.boxShadow='0 3px 5px rgba(0, 0, 0, 0.1)'">
          −
        </button>
      </div>
    </div>

    <div style="margin: 10px 0;">
      <label style="font-size: 16px; display: block; margin-bottom: 5px;">Lebar (l)</label>
      <div style="display: flex; gap: 8px;">
        <button id="addWidthBtn" style="
            margin: 0; 
            width: 50%; 
            padding: 12px; 
            font-size: 24px;
            background: #000;
            color: white;
            border: 2px solid #000;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s ease;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.2);
        " onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 5px 10px rgba(0, 0, 0, 0.3)'"
          onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 3px 5px rgba(0, 0, 0, 0.2)'">
          +
        </button>
        <button id="redWidthBtn" style="
            margin: 0; 
            width: 50%; 
            padding: 12px; 
            font-size: 24px;
            background: white;
            color: #000;
            border: 2px solid #000;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s ease;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.1);
        " onmouseover="this.style.background='#000'; this.style.color='white'; this.style.transform='scale(1.05)'; this.style.boxShadow='0 5px 10px rgba(0, 0, 0, 0.3)'"
          onmouseout="this.style.background='white'; this.style.color='#000'; this.style.transform='scale(1)'; this.style.boxShadow='0 3px 5px rgba(0, 0, 0, 0.1)'">
          −
        </button>
      </div>
    </div>

    <div style="margin: 10px 0;">
      <label style="font-size: 16px; display: block; margin-bottom: 5px;">Tinggi (t)</label>
      <div style="display: flex; gap: 8px;">
        <button id="addHeightBtn" style="
            margin: 0; 
            width: 50%; 
            padding: 12px; 
            font-size: 24px;
            background: #000;
            color: white;
            border: 2px solid #000;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s ease;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.2);
        " onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 5px 10px rgba(0, 0, 0, 0.3)'"
          onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 3px 5px rgba(0, 0, 0, 0.2)'">
          +
        </button>
        <button id="redHeightBtn" style="
            margin: 0; 
            width: 50%; 
            padding: 12px; 
            font-size: 24px;
            background: white;
            color: #000;
            border: 2px solid #000;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 700;
            transition: all 0.3s ease;
            box-shadow: 0 3px 5px rgba(0, 0, 0, 0.1);
        " onmouseover="this.style.background='#000'; this.style.color='white'; this.style.transform='scale(1.05)'; this.style.boxShadow='0 5px 10px rgba(0, 0, 0, 0.3)'"
          onmouseout="this.style.background='white'; this.style.color='#000'; this.style.transform='scale(1)'; this.style.boxShadow='0 3px 5px rgba(0, 0, 0, 0.1)'">
          −
        </button>
      </div>
    </div>
  </div>

  <script type="importmap">
    {
      "imports": {
        "three": "https://cdn.jsdelivr.net/npm/three@0.160.0/build/three.module.js",
        "three/addons/": "https://cdn.jsdelivr.net/npm/three@0.160.0/examples/jsm/"
      }
    }
  </script>
  <script type="module">
    import * as THREE from "three";
    import { OrbitControls } from "three/addons/controls/OrbitControls.js";

    const scene = new THREE.Scene();
    scene.background = new THREE.Color(0xffffff);

    const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.set(5, 5, 7);

    const renderer = new THREE.WebGLRenderer({ antialias: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    document.body.appendChild(renderer.domElement);

    const controls = new OrbitControls(camera, renderer.domElement);
    controls.enableDamping = true;

    const gridHelper = new THREE.GridHelper(10, 10, 0x444444, 0x222222);
    gridHelper.position.y = -2;
    scene.add(gridHelper);

    let length = 1.5;  // panjang (x)
    let width = 1.0;   // lebar (z)
    let height = 0.8;  // tinggi (y)

    const materials = {
      front: new THREE.MeshBasicMaterial({ color: 0xffffff, side: THREE.DoubleSide }),
      back: new THREE.MeshBasicMaterial({ color: 0xffffff, side: THREE.DoubleSide }),
      top: new THREE.MeshBasicMaterial({ color: 0xffffff, side: THREE.DoubleSide }),
      bottom: new THREE.MeshBasicMaterial({ color: 0xffffff, side: THREE.DoubleSide }),
      right: new THREE.MeshBasicMaterial({ color: 0xffffff, side: THREE.DoubleSide }),
      left: new THREE.MeshBasicMaterial({ color: 0xffffff, side: THREE.DoubleSide })
    };

    const edgeMaterial = new THREE.LineBasicMaterial({ color: 0x000000, linewidth: 2 });

    function createFace(w, h, material, name) {
      const group = new THREE.Group();
      const geometry = new THREE.PlaneGeometry(w, h);
      const mesh = new THREE.Mesh(geometry, material);
      const edgeGeometry = new THREE.EdgesGeometry(geometry);
      const edges = new THREE.LineSegments(edgeGeometry, edgeMaterial);
      group.add(mesh);
      group.add(edges);
      group.userData.name = name;
      return group;
    }

    const frontPivot = new THREE.Group();
    scene.add(frontPivot);
    const frontFace = createFace(length, height, materials.front, 'front');
    frontFace.position.set(0, 0, width / 2);
    frontPivot.add(frontFace);
    frontPivot.userData.target = { rotation: new THREE.Euler(0, Math.PI, 0), position: new THREE.Vector3(length + width, 0, 0) };

    const leftPivot = new THREE.Group();
    scene.add(leftPivot);
    const leftFace = createFace(width, height, materials.left, 'left');
    leftFace.rotation.y = -Math.PI / 2;
    leftFace.position.set(-length / 2, 0, 0);
    leftPivot.add(leftFace);
    leftPivot.userData.target = { rotation: new THREE.Euler(0, -Math.PI / 2, 0), position: new THREE.Vector3(-length / 2 - width / 2, 0, 0) };

    const rightPivot = new THREE.Group();
    scene.add(rightPivot);
    const rightFace = createFace(width, height, materials.right, 'right');
    rightFace.rotation.y = Math.PI / 2;
    rightFace.position.set(length / 2, 0, 0);
    rightPivot.add(rightFace);
    rightPivot.userData.target = { rotation: new THREE.Euler(0, Math.PI / 2, 0), position: new THREE.Vector3(length / 2 + width / 2, 0, 0) };

    const topPivot = new THREE.Group();
    scene.add(topPivot);
    const topFace = createFace(length, width, materials.top, 'top');
    topFace.rotation.x = -Math.PI / 2;
    topFace.position.set(0, height / 2, 0);
    topPivot.add(topFace);
    topPivot.userData.target = { rotation: new THREE.Euler(-Math.PI / 2, 0, 0), position: new THREE.Vector3(0, height / 2 + width / 2, 0) };

    const bottomPivot = new THREE.Group();
    scene.add(bottomPivot);
    const bottomFace = createFace(length, width, materials.bottom, 'bottom');
    bottomFace.rotation.x = Math.PI / 2;
    bottomFace.position.set(0, -height / 2, 0);
    bottomPivot.add(bottomFace);
    bottomPivot.userData.target = { rotation: new THREE.Euler(Math.PI / 2, 0, 0), position: new THREE.Vector3(0, -height / 2 - width / 2, 0) };

    const backFace = createFace(length, height, materials.back, 'back');
    backFace.position.set(0, 0, -width / 2);
    scene.add(backFace);

    const pivots = [frontPivot, leftPivot, rightPivot, topPivot, bottomPivot];
    const allFaces = [frontFace, leftFace, rightFace, topFace, bottomFace, backFace];

    let animating = false;
    let progress = 0;
    const animationSpeed = 0.01;
    let targetProgress = 0;
    let showInfo = false;
    const infoLabels = [];

    const dimensionsEl = document.getElementById("dimensions");
    const volumeEl = document.getElementById("volume");
    const surfaceEl = document.getElementById("surface");

    function createInfoLabel(text) {
      const label = document.createElement('div');
      label.className = 'info-label';
      label.textContent = text;
      label.style.display = 'none';
      document.body.appendChild(label);
      return label;
    }

    const vertexLabel = createInfoLabel('Titik Sudut (8 total)');
    const edgeLabel = createInfoLabel('Rusuk (12 total)');
    const faceLabel = createInfoLabel('Sisi (6 total)');

    infoLabels.push(
      { element: vertexLabel, position: new THREE.Vector3(length / 2, height / 2, width / 2), offset: { x: 10, y: -10 } },
      { element: edgeLabel, position: new THREE.Vector3(length / 2, height / 2, 0), offset: { x: 10, y: 0 } },
      { element: faceLabel, position: new THREE.Vector3(0, 0, width / 2 + 0.01), offset: { x: 10, y: 10 } }
    );

    function updateInfoLabels() {
      if (!showInfo) {
        infoLabels.forEach(label => label.element.style.display = 'none');
        return;
      }

      infoLabels.forEach(label => {
        const position = label.position.clone();
        const vector = position.project(camera);

        const x = (vector.x * 0.5 + 0.5) * window.innerWidth;
        const y = (vector.y * -0.5 + 0.5) * window.innerHeight;

        label.element.style.left = (x + label.offset.x) + 'px';
        label.element.style.top = (y + label.offset.y) + 'px';
        label.element.style.display = 'block';
      });
    }

    function updateCuboidSize() {
      const p = length * 10;
      const l = width * 10;
      const t = height * 10;
      const v = p * l * t;
      const pl = p * l;
      const pt = p * t;
      const lt = l * t;
      const area = 2 * (pl + pt + lt);
      
      dimensionsEl.textContent = `p = ${p.toFixed(0)} cm, l = ${l.toFixed(0)} cm, t = ${t.toFixed(0)} cm`;
      volumeEl.textContent = `V = ${p.toFixed(0)} × ${l.toFixed(0)} × ${t.toFixed(0)} = ${v.toFixed(0)} cm³`;
      surfaceEl.textContent = `A = 2(${pl.toFixed(0)} + ${pt.toFixed(0)} + ${lt.toFixed(0)}) = ${area.toFixed(0)} cm²`;

      // Update all faces
      allFaces.forEach(face => {
        const mesh = face.children[0];
        const edges = face.children[1];

        mesh.geometry.dispose();
        edges.geometry.dispose();

        let w, h;
        if (face.userData.name === 'front' || face.userData.name === 'back') {
          w = length;
          h = height;
        } else if (face.userData.name === 'left' || face.userData.name === 'right') {
          w = width;
          h = height;
        } else {
          w = length;
          h = width;
        }

        const newGeometry = new THREE.PlaneGeometry(w, h);
        const newEdgeGeometry = new THREE.EdgesGeometry(newGeometry);

        mesh.geometry = newGeometry;
        edges.geometry = newEdgeGeometry;
      });

      frontFace.position.set(0, 0, width / 2);
      leftFace.position.set(-length / 2, 0, 0);
      rightFace.position.set(length / 2, 0, 0);
      topFace.position.set(0, height / 2, 0);
      bottomFace.position.set(0, -height / 2, 0);
      backFace.position.set(0, 0, -width / 2);

      infoLabels[0].position = new THREE.Vector3(length / 2, height / 2, width / 2);
      infoLabels[1].position = new THREE.Vector3(length / 2, height / 2, 0);
      infoLabels[2].position = new THREE.Vector3(0, 0, width / 2 + 0.01);

      frontPivot.userData.target.position = new THREE.Vector3(length + width, 0, 0);
      leftPivot.userData.target.position = new THREE.Vector3(-width / 2, 0, 0);
      rightPivot.userData.target.position = new THREE.Vector3(width / 2, 0, 0);
      topPivot.userData.target.position = new THREE.Vector3(0, width / 2, 0);
      bottomPivot.userData.target.position = new THREE.Vector3(0, -width / 2, 0);

      const easedProgress = easeInOutCubic(progress);
      pivots.forEach(pivot => {
        const target = pivot.userData.target;
        pivot.rotation.x = THREE.MathUtils.lerp(0, target.rotation.x, easedProgress);
        pivot.rotation.y = THREE.MathUtils.lerp(0, target.rotation.y, easedProgress);
        pivot.rotation.z = THREE.MathUtils.lerp(0, target.rotation.z, easedProgress);
        pivot.position.x = THREE.MathUtils.lerp(0, target.position.x, easedProgress);
        pivot.position.y = THREE.MathUtils.lerp(0, target.position.y, easedProgress);
        pivot.position.z = THREE.MathUtils.lerp(0, target.position.z, easedProgress);
      });
    }

    document.getElementById('showInfoBtn').addEventListener('click', () => {
      if (unfold) {
        return;
      }
      showInfo = !showInfo;
      const btn = document.getElementById('showInfoBtn');
      btn.textContent = showInfo ? 'Sembunyikan Info' : 'Tampilkan Info';
      updateInfoLabels();
    });

    document.getElementById('zoomInBtn').addEventListener('click', () => {
      const direction = new THREE.Vector3();
      camera.getWorldDirection(direction);
      camera.position.addScaledVector(direction, 0.5);
      controls.update();
    });

    document.getElementById('zoomOutBtn').addEventListener('click', () => {
      const direction = new THREE.Vector3();
      camera.getWorldDirection(direction);
      camera.position.addScaledVector(direction, -0.5);
      controls.update();
    });

    document.getElementById('addLengthBtn').addEventListener('click', () => {
      if (length <= 2.5) {
        length += 0.1;
        updateCuboidSize();
      }
    });

    document.getElementById('redLengthBtn').addEventListener('click', () => {
      if (length > 0.3) {
        length -= 0.1;
        updateCuboidSize();
      }
    });

    document.getElementById('addWidthBtn').addEventListener('click', () => {
      if (width <= 2.5) {
        width += 0.1;
        updateCuboidSize();
      }
    });

    document.getElementById('redWidthBtn').addEventListener('click', () => {
      if (width > 0.3) {
        width -= 0.1;
        updateCuboidSize();
      }
    });

    document.getElementById('addHeightBtn').addEventListener('click', () => {
      if (height <= 2.5) {
        height += 0.1;
        updateCuboidSize();
      }
    });

    document.getElementById('redHeightBtn').addEventListener('click', () => {
      if (height > 0.3) {
        height -= 0.1;
        updateCuboidSize();
      }
    });

    let unfold = false;
    document.getElementById('toggleBtn').addEventListener('click', () => {
      unfold = !unfold;
      targetProgress = unfold ? 1 : 0;
      
      const btn = document.getElementById('toggleBtn');
      btn.textContent = unfold ? 'Lipat' : 'Bongkar';
      
      if (unfold && showInfo) {
        infoLabels.forEach(label => label.element.style.display = 'none');
        showInfo = false;
        const tempBtn = document.getElementById("showInfoBtn");
        tempBtn.textContent = "Tampilkan Info";
      }
      animating = true;
    });

    document.getElementById('resetBtn').addEventListener('click', () => {
      camera.position.set(5, 5, 7);
      controls.target.set(0, 0, 0);
      controls.update();
    });

    function easeInOutCubic(t) {
      return t < 0.5 ? 4 * t * t * t : 1 - Math.pow(-2 * t + 2, 3) / 2;
    }

    function animate() {
      requestAnimationFrame(animate);

      if (animating) {
        if (Math.abs(progress - targetProgress) > 0.001) {
          progress += (targetProgress - progress) * animationSpeed * 3;
        } else {
          progress = targetProgress;
          animating = false;
        }

        const easedProgress = easeInOutCubic(progress);

        pivots.forEach(pivot => {
          const target = pivot.userData.target;

          pivot.rotation.x = THREE.MathUtils.lerp(0, target.rotation.x, easedProgress);
          pivot.rotation.y = THREE.MathUtils.lerp(0, target.rotation.y, easedProgress);
          pivot.rotation.z = THREE.MathUtils.lerp(0, target.rotation.z, easedProgress);

          pivot.position.x = THREE.MathUtils.lerp(0, target.position.x, easedProgress);
          pivot.position.y = THREE.MathUtils.lerp(0, target.position.y, easedProgress);
          pivot.position.z = THREE.MathUtils.lerp(0, target.position.z, easedProgress);
        });
      }

      controls.update();
      renderer.render(scene, camera);
      updateInfoLabels();
    }
    animate();

    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });
  </script>
</body>

</html>
